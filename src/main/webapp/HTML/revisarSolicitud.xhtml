<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a="http://xmlns.jcp.org/jsf/passth/rough"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>Mashi Bank</title>
</h:head>
<ui:composition template="plantillaJefeCredito.xhtml">
	<body>
		<ui:define name="formJefeCredito">
		<div class="container-fluid">
			<div class="row-fluid">
				<div class="span12">
					<div class="widget-box">
						<div class="widget-content nopadding" style="color: black">
						<h3 class="box-title" align="center">Solicitud</h3>
						<div align="left">
						<h:form id="formulario">
							<h:messages class="alert text-center"/>
							<h:outputLabel class="text-left" style="margin-left:5%;"
										   value="Nro. Cuenta: #{revisionCredito.cuenta.id}"/><br/>
							<h:outputLabel class="text-left" style="margin-left:5%;"
										   value="Monto solicitado: #{revisionCredito.solicitud.montoSolicitado}"/><br/>
							<h:outputLabel class="text-left" style="margin-left:5%;"
										   value="Fecha: #{revisionCredito.solicitud.fecha}"/><br/>
							<h:outputLabel class="text-left" style="margin-left:5%;"
										       value="Contenido:"/><br/>
							<h:outputLabel class="text-left" style="margin-left:10%"
										       value="#{revisionCredito.solicitud.texto}"/><br/>
							<h:outputLabel class="text-left" style="margin-left:5%;"
										   value="Archivos adjuntos:"/><br/>
							<h:dataTable style="margin-left:5%; margin-bottom:5%"
										 value="#{revisionCredito.archivosAdjuntos}"
										 var="archivo">
								<h:column>
									<f:facet name="header">Nombre</f:facet>
									#{archivo.name}
								</h:column>
								<h:column>
									<p:commandButton class="btn" value="Descargar" ajax="false" 
									                 onclick="PrimeFaces.monitorDownload(start, stop);">
        								<p:fileDownload value="#{archivo}" />
    								</p:commandButton> 
								</h:column>
							</h:dataTable>
							
							<label class="text-left" style="margin-left: 5%">
								Fecha Vencimiento: <p:datePicker id="desde" value="#{revisionCredito.fechaVencimiento}"/>
							</label>
							<h:outputLabel class="text-left" style="margin-left:5%;"
										   value="Estado:"/>
							<h:selectOneMenu style="margin-left:5%;" value="#{revisionCredito.estado}">
								<f:selectItems class="text-left" style="margin-left:5%;"
											   value="#{revisionCredito.estadosSolicitud}"
											   var="estado" itemValue="#{estado}" itemLabel="#{estado.etiqueta}" />
							</h:selectOneMenu><br/>
							<h:outputLabel class="text-left" style="margin-left:5%;"
										   value="Tipo Credito:"/>
							<h:selectOneMenu style="margin-left:5%;" value="#{revisionCredito.tipoCredito}">
								<f:selectItems class="text-left" style="margin-left:5%;"
											   value="#{revisionCredito.tiposCredito}"
											   var="tipo" itemValue="#{tipo}" itemLabel="#{tipo.etiqueta}" />
							</h:selectOneMenu><br/>
							<h:outputLabel class="text-left" style="margin-left:5%;"
										   value="Observaciones:"/><br/>
							<h:inputTextarea style="margin-left:5%; width:90%;" value="#{revisionCredito.observaciones}"/><br/>
							<div align="center">
								<h:commandButton class="btn btn-primary" style="margin-bottom:2%;"
											 action="#{revisionCredito.cambiarEstadoSolicitud()}" 
							                 value="Guardar" update="formulario"/>
							</div>
						</h:form>
						</div>
						</div>
					</div>
				</div>
			</div>
		</div>			
		</ui:define>
	</body>
</ui:composition>
</html>
